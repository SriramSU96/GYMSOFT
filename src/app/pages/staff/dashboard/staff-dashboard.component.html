<div *ngIf="isLoading$ | async">
    <p>Loading staff data...</p>
</div>

<div *ngIf="!(isLoading$ | async)">

    <!-- Salary Summary Cards -->
    <div *ngIf="salarySummary$ | async as summary">
        <div>
            <h3>Total Salaries</h3>
            <p>₹{{ summary.total | number }}</p>
        </div>
        <div>
            <h3>Paid</h3>
            <p>₹{{ summary.paid | number }}</p>
        </div>
        <div>
            <h3>Pending</h3>
            <p>₹{{ summary.pending | number }}</p>
        </div>
    </div>

    <!-- Staff List Table -->
    <div>
        <div>
            <h3>Staff Management</h3>
            <button routerLink="/staff/add">+ Add Staff</button>
        </div>

        <div>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Role</th>
                        <th>Today's Status</th>
                        <th>Base Salary</th>
                        <th>Phone</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let staff of (staffWithAttendance$ | async)">
                        <td>{{ staff.name }}</td>
                        <td>{{ staff.role }}</td>
                        <td>
                            <select [ngModel]="staff.status" (ngModelChange)="markAttendance(staff.id, $event)"
                                [ngClass]="{
                        'badge-success': staff.status === 'present',
                        'badge-danger': staff.status === 'absent',
                        'badge-warning': staff.status === 'leave'
                      }">
                                <option value="present">Present</option>
                                <option value="absent">Absent</option>
                                <option value="leave">On Leave</option>
                            </select>
                        </td>
                        <td>₹{{ staff.salary | number }}</td>
                        <td>{{ staff.phone }}</td>
                        <td>
                            <button [routerLink]="['/staff', staff.id]">View</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>