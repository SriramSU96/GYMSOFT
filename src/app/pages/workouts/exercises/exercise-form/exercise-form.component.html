<div class="exercise-form-container">
    <div class="page-header">
        <h1>{{ isEditMode ? 'Edit Exercise' : 'Add New Exercise' }}</h1>
    </div>

    <form [formGroup]="exerciseForm" (ngSubmit)="onSubmit()" class="exercise-form">
        <!-- Name -->
        <div class="form-group">
            <label for="name">Exercise Name <span class="required">*</span></label>
            <input type="text" id="name" formControlName="name" placeholder="e.g., Barbell Bench Press">
            <div *ngIf="isFieldInvalid('name')" class="error-message">
                {{ getErrorMessage('name') }}
            </div>
        </div>

        <!-- Muscle Group -->
        <div class="form-group">
            <label for="muscleGroup">Muscle Group <span class="required">*</span></label>
            <select id="muscleGroup" formControlName="muscleGroup">
                <option value="">Select muscle group</option>
                <option *ngFor="let group of muscleGroups" [value]="group">{{ group }}</option>
            </select>
            <div *ngIf="isFieldInvalid('muscleGroup')" class="error-message">
                {{ getErrorMessage('muscleGroup') }}
            </div>
        </div>

        <!-- Equipment -->
        <div class="form-group">
            <label for="equipment">Equipment <span class="required">*</span></label>
            <select id="equipment" formControlName="equipment">
                <option value="">Select equipment</option>
                <option *ngFor="let eq of equipmentTypes" [value]="eq">{{ eq }}</option>
            </select>
            <div *ngIf="isFieldInvalid('equipment')" class="error-message">
                {{ getErrorMessage('equipment') }}
            </div>
        </div>

        <!-- Difficulty -->
        <div class="form-group">
            <label for="difficulty">Difficulty Level <span class="required">*</span></label>
            <select id="difficulty" formControlName="difficulty">
                <option value="">Select difficulty</option>
                <option *ngFor="let level of difficultyLevels" [value]="level">{{ level }}</option>
            </select>
            <div *ngIf="isFieldInvalid('difficulty')" class="error-message">
                {{ getErrorMessage('difficulty') }}
            </div>
        </div>

        <!-- Description -->
        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" formControlName="description" rows="4"
                placeholder="Detailed description of how to perform the exercise..."></textarea>
        </div>

        <!-- Video URL -->
        <div class="form-group">
            <label for="videoUrl">Video URL</label>
            <input type="url" id="videoUrl" formControlName="videoUrl" placeholder="https://youtube.com/watch?v=...">
            <small class="help-text">Optional: Link to a demonstration video</small>
        </div>

        <!-- Image URL -->
        <div class="form-group">
            <label for="imageUrl">Image URL</label>
            <input type="url" id="imageUrl" formControlName="imageUrl" placeholder="https://example.com/image.jpg">
            <small class="help-text">Optional: Link to an exercise diagram or photo</small>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="loading$ | async">
                {{ isEditMode ? 'Update Exercise' : 'Create Exercise' }}
            </button>
            <button type="button" class="btn-secondary" (click)="onCancel()" [disabled]="loading$ | async">
                Cancel
            </button>
        </div>

        <div *ngIf="loading$ | async" class="loading-overlay">
            <p>Saving...</p>
        </div>
    </form>
</div>