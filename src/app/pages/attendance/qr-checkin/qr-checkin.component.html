<div class="max-w-md mx-auto text-center space-y-lg">

    <h2 class="text-2xl font-bold text-white">QR Check-In Scanner</h2>

    <div
        class="relative card p-0 overflow-hidden aspect-square flex flex-col items-center justify-center bg-black border-2 border-[var(--color-border)]">

        <!-- Camera Placeholder -->
        <div *ngIf="isScanning$ | async" class="absolute inset-0 bg-gray-900 flex items-center justify-center">
            <div
                class="scanner-line w-full h-1 bg-[var(--color-accent-primary)] absolute top-0 shadow-glow animate-scan">
            </div>
            <p class="text-[var(--color-text-secondary)] animate-pulse">Scanning...</p>
        </div>

        <!-- Idle State -->
        <div *ngIf="!(isScanning$ | async) && !(scanSuccess$ | async)" class="flex flex-col items-center gap-4 p-8">
            <span class="text-6xl">ðŸ“·</span>
            <p class="text-[var(--color-text-secondary)]">Point camera at member's QR code</p>
        </div>

        <!-- Success State -->
        <div *ngIf="scanSuccess$ | async"
            class="absolute inset-0 bg-[rgba(34,197,94,0.1)] flex flex-col items-center justify-center animate-fade-in">
            <div class="w-20 h-20 rounded-full bg-[var(--color-success)] flex items-center justify-center mb-4">
                <span class="text-4xl text-white">âœ“</span>
            </div>
            <h3 class="text-xl font-bold text-white">Checked In!</h3>
            <p class="text-sm text-[var(--color-text-secondary)] mt-2">{{ scannedData$ | async }}</p>
        </div>

    </div>

    <div class="flex flex-col gap-4">
        <p class="text-sm font-medium"
            [ngClass]="{'text-[var(--color-text-secondary)]': !(scanSuccess$ | async), 'text-[var(--color-success)]': (scanSuccess$ | async)}">
            {{ statusMessage$ | async }}
        </p>

        <button *ngIf="!(isScanning$ | async)" (click)="startScanning()"
            class="btn btn-primary w-full py-3 justify-center text-lg">
            <span *ngIf="!(scanSuccess$ | async)">Start Scanner</span>
            <span *ngIf="scanSuccess$ | async">Scan Another</span>
        </button>
    </div>

    <!-- Offline Indicator -->
    <div *ngIf="isOffline" class="bg-[var(--color-warning)] text-black p-2 rounded text-sm font-bold">
        âš  You are Offline. Attendance will be synced later.
    </div>

</div>