<div class="page-container fade-in">
    <div class="page-header mb-lg">
        <div>
            <h2 class="mb-xs">My Class Bookings</h2>
            <p class="text-secondary">Manage your upcoming and past classes.</p>
        </div>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage"
        class="mb-lg p-md bg-[var(--success-dim)] text-[var(--success)] rounded-md flex items-center gap-sm animate-bounce-in">
        <span class="material-icons">check_circle</span>
        {{ successMessage }}
    </div>

    <!-- Loading -->
    <div *ngIf="isLoading" class="flex justify-center p-xl">
        <div class="animate-pulse text-accent">Loading bookings...</div>
    </div>

    <!-- Bookings List -->
    <div *ngIf="!isLoading" class="grid gap-md max-w-4xl">
        <div *ngFor="let booking of bookings"
            class="card flex flex-col md:flex-row justify-between items-center gap-md group hover:border-[var(--accent-primary)] transition-colors">

            <div class="flex items-center gap-md w-full md:w-auto">
                <div
                    class="bg-[var(--bg-app)] p-md rounded text-center min-w-[80px] border border-[var(--color-border)]">
                    <div class="text-xs text-secondary uppercase font-bold">{{ $any(booking.classId).scheduleDate |
                        date:'MMM'
                        }}</div>
                    <div class="text-2xl font-bold text-white">{{ $any(booking.classId).scheduleDate | date:'d' }}
                    </div>
                </div>

                <div>
                    <h4 class="text-lg font-bold mb-1">{{ $any(booking.classId).title }}</h4>
                    <div class="text-sm text-muted flex items-center gap-2">
                        <span><span class="material-icons text-xs align-middle">schedule</span> {{
                            $any(booking.classId).startTime }}</span>
                        <span>â€¢</span>
                        <span>{{ $any(booking.classId).duration }} min</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-lg w-full md:w-auto justify-between md:justify-end">
                <span class="badge" [ngClass]="{
                          'badge-success': booking.status === 'Booked',
                          'badge-danger': booking.status === 'Cancelled',
                          'badge-outline': booking.status === 'Attended'
                      }">
                    {{ booking.status }}
                </span>

                <button *ngIf="booking.status === 'Booked'" class="btn btn-ghost text-danger hover:bg-red-900/10"
                    (click)="cancelBooking(booking._id || '')">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && bookings.length === 0" class="text-center py-xl text-muted">
        <span class="material-icons text-4xl mb-md">event_available</span>
        <p>You haven't booked any classes yet.</p>
        <button class="btn btn-outline mt-md" routerLink="/classes/list">Browse Classes</button>
    </div>
</div>